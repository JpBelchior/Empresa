import{h as o,s as l,e as _,a as g,m}from"./funcoes-C9HBdHmr.js";import{a as i}from"./funcoes-D_cJJZ7h.js";import"./index-D_cyGAQO.js";$(document).ready(function(){i(),d()});$(".registrar").click(function(){let e=$(this).attr("propriedade"),s={titulo:$("#pergunta"+e+" h5").html(),pergunta_id:e,resposta:$("#pergunta"+e+" .resposta").val(),formulario_id:$("#formulario_id").val()};if(o("btn_registrar_pergunta_id_"+e,!1),t==!1){let r="";if(s.resposta==""&&(r+="Resposta é obrigatório!"),r!=""){new Swal({title:"Erro!",icon:"error",text:r}),o("btn_registrar_pergunta_id_"+e,!0);return}h(s),Swal.mixin({toast:!0,position:"top-start",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:u=>{u.onmouseenter=Swal.stopTimer,u.onmouseleave=Swal.resumeTimer}}).fire({icon:"success",title:"Resposta adiciona na fila de espera!"}),o("btn_registrar_pergunta_id_"+e,!0);return}axios.post("/formularios/registrar",s).then(r=>{l(r.data.mensagem),$("#qtd_perguntas_respondidas").html(`(${r.data.qtd})`)}).catch(r=>{_(r)}).finally(()=>{o("btn_registrar_pergunta_id_"+e,!0)})});$("#btn_perguntas_respondidas").click(function(){g("modal_perguntas_respondidas",!1),i(),m("modal_perguntas_respondidas")});$(document).on("click",".excluir_resposta",function(){let e=$(this).attr("resposta");o("excluir_resposta"+e,!1),axios.delete(app_url+"/formularios/excluir/resposta/"+e).then(a=>{l(a),i()}).catch(a=>{_(a)}).finally(()=>{m("excluir_resposta"+e)})});var p=[],t=!0;function n(e){e?($("#online").removeClass("bg-red-50"),$("#online").addClass("bg-green-50"),$("#online").html("ONLINE")):($("#online").removeClass("bg-green-50"),$("#online").addClass("bg-red-50"),$("#online").html("OFFLINE"))}function c(){const e=new XMLHttpRequest;e.open("GET",url,!0),e.timeout=5e3,e.onload=function(){e.status>=200&&e.status<300?(t=!0,n(!0)):(t=!1,n(!1))},e.onerror=function(){t=!1,n(!1)},e.ontimeout=function(){t=!1,n(!1)},e.send()}setInterval(c,200);setInterval(b,2e3);function h(e){p.push(e),localStorage.setItem("dados",JSON.stringify(p)),d()}function f(){return JSON.parse(localStorage.getItem("dados"))}function d(){let e=f();$("#perguntas_em_espera_qtd").html(`(${e.length})`),$("#perguntas_respondidas_em_espera").empty();for(let a in e){let s=`<li class="list-group-item">${e[a].titulo}: ${e[a].resposta}</li>`;$("#perguntas_respondidas_em_espera").append(s)}}function b(){if(t===!1)return;let e={dados:f()};e.dados.length>0&&axios.post(app_url+"/formularios/registrar_perguntas_em_espera/"+$("#formulario_id").val(),e).then(a=>{localStorage.setItem("dados",JSON.stringify([])),i(),d(),l("Respostas em espera foram cadastradas!")})}
