import{i as n,a as s,m as c,h as p,f as u,l as _,s as m,e as g}from"./funcoes-TE4sOoC0.js";import{l as f}from"./funcoes-D3Fxcb3e.js";import{p as b}from"./funcoes-DaD_TNBx.js";import{p as v}from"./funcoes-BUn5WPab.js";import{p as y}from"./funcoes-ClpHCIMZ.js";import{p as k}from"./funcoes-8_Yp2W1_.js";import{p as x}from"./funcoes-Y446dBa8.js";import"./index-C4N4Q9IC.js";var i=1,h=n("adicionar_pergunta_tipo_empreendimento"),w=n("adicionar_pergunta_topico"),q=n("adicionar_pergunta_area"),O=n("adicionar_pergunta_tag");$("#btn_modal_adicionar_pergunta").click(async function(){s("modal_adicionar_pergunta",!1);let a=await b("ativo","true");$("#adicionar_pergunta_tematica").empty();for(let t in a){let l=`<option value="${a[t].id}">${a[t].nome}</option>`;$("#adicionar_pergunta_tematica").append(l)}let r=await v("ativo","true");for(let t in r)h.addOption({value:r[t].id,text:r[t].nome});let o=await y("ativo","true");for(let t in o)w.addOption({value:o[t].id,text:o[t].nome});let e=await k("ativo","true");for(let t in e)q.addOption({value:e[t].id,text:e[t].nome});let d=await x("ativo","true");for(let t in d)O.addOption({value:d[t].id,text:d[t].nome});c("modal_adicionar_pergunta")});$("#btn_adicionar_pergunta").click(function(){p("btn_adicionar_pergunta",!1);let a=new FormData;a.append("titulo",$("#adicionar_pergunta_titulo").val()),a.append("tematica_id",$("#adicionar_pergunta_tematica").val()),a.append("tipos_empreendimentos",$("#adicionar_pergunta_tipo_empreendimento").val()),a.append("areas",$("#adicionar_pergunta_area").val()),a.append("topicos",$("#adicionar_pergunta_topico").val()),a.append("tags",$("#adicionar_pergunta_tag").val());let r=document.querySelectorAll(".foto"),o=document.querySelectorAll(".legenda");for(let e=0;e<o.length;e++)a.append("legendas[]",o[e].value?o[e].value:"");for(let e of r)e.files&&e.files[0]?a.append("fotos[]",e.files[0]):a.append("fotos[]",null);axios.post("perguntas/adicionar",a).then(e=>{u("modal_adicionar_pergunta"),_("modal_adicionar_pergunta"),m(e),f(),$("#adicionar_pergunta_fotos").empty(),i=1}).catch(e=>{g(e)}).finally(()=>{p("btn_adicionar_pergunta",!0)})});$("#btn_adicionar_foto").click(function(){let a=`<div id="foto${i}" class="my-2 border border-radius">                        
                        <input class="foto mb-2 block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400" type="file" accept=".png, .jpg, .jpeg">
                        <input type="text"  class="legenda block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 text-xs focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Legenda...">
                        <button foto="foto${i}" type="button" class="adicionar_pergunta_excluir_foto text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900"><i class="fas fa-times"></i></button>
                    </div>`;$("#adicionar_pergunta_fotos").append(a),i++});$(document).on("click",".adicionar_pergunta_excluir_foto",function(){let a=$(this).attr("foto");$("#"+a).remove()});
