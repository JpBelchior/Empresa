import{i as u,e as d,a as v,m as h,h as _,s as b,f as x}from"./funcoes-HOoVbd89.js";import{l as y}from"./funcoes-COSr3Z1B.js";import"./index-BxfsJSEQ.js";var c=u("editar_pergunta_tipo_empreendimento"),g=u("editar_pergunta_topico"),f=u("editar_pergunta_area"),m=u("editar_pergunta_tag"),l=1,p=[];$(document).on("click",".editar",function(){$("#editar_pergunta_tematica").empty(),axios.get("tematicas/lista").then(a=>{let t=a.data;for(let o in t){let e=t[o].ativo==!0?"Ativo":"Inativo",s=`<option value="${t[o].id}">${t[o].nome}(${e})</option>`;$("#editar_pergunta_tematica").append(s)}}).catch(a=>{d(a)}),axios.get("tipos_empreendimentos/lista").then(a=>{let t=a.data;for(let o in t){let e=t[o].ativo==!0?"Ativo":"Inativo";c.addOption({value:t[o].id,text:t[o].nome+`(${e})`})}}).catch(a=>d(a)),axios.get("topicos/lista").then(a=>{let t=a.data;for(let o in t){let e=t[o].ativo==!0?"Ativo":"Inativo";g.addOption({value:t[o].id,text:t[o].nome+`(${e})`})}}).catch(a=>d(a)),axios.get("areas/lista").then(a=>{let t=a.data;for(let o in t){let e=t[o].ativo==!0?"Ativo":"Inativo";f.addOption({value:t[o].id,text:t[o].nome+`(${e})`})}}).catch(a=>d(a)),axios.get("tags/lista").then(a=>{let t=a.data;for(let o in t){let e=t[o].ativo==!0?"Ativo":"Inativo";m.addOption({value:t[o].id,text:t[o].nome+`(${e})`})}}).catch(a=>d(a)),v("modal_editar_pergunta",!1);let i=$(this).attr("pergunta");axios.get("perguntas/detalhes/"+i).then(a=>{p=[],$("#editar_pergunta_fotos").empty();let t=a.data,o=!!a.data.ativo,e=[];for(let r in t.tipos_empreendimentos){let n=t.tipos_empreendimentos[r].tipo_empreendimento_id;e.push(n)}c.setValue(e),e=[];for(let r in t.topicos){let n=t.topicos[r].topico_id;e.push(n)}g.setValue(e),e=[];for(let r in t.areas){let n=t.areas[r].area_id;e.push(n)}f.setValue(e),e=[];for(let r in t.tags){let n=t.tags[r].tag_id;e.push(n)}m.setValue(e);let s=t.fotos;for(let r in s){let n=`<div id="foto${l}" class="max-w-sm bg-white border border-gray-200 rounded-lg shadow-sm ">                            
                            <img class="rounded-t-lg" src="${app_url}/arquivos/exibir/${s[r].arquivo_id}" alt="" />                            
                            <div class="p-5">                                
                                <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 ">${s[r].legenda}</h5>                                
                                <button foto="foto${l}" foto_id="${s[r].id}" type="button" class="editar_pergunta_excluir_foto text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2"><i class="fas fa-times"></i></button>
                            </div>
                        </div>`;$("#editar_pergunta_fotos").append(n),l++}$("#editar_pergunta_id").val(t.id),$("#editar_pergunta_titulo").val(t.titulo),$("#editar_pergunta_tematica").val(t.tematica_id),$("#editar_pergunta_ativo").prop("checked",o),h("modal_editar_pergunta")}).catch(a=>{d(a)})});$(document).on("click",".editar_pergunta_excluir_foto",function(){let i=$(this).attr("foto"),a=$(this).attr("foto_id");p.push(a),$("#"+i).remove()});$("#btn_editar_pergunta").click(function(){_("btn_editar_pergunta",!1);let i=new FormData;i.append("titulo",$("#editar_pergunta_titulo").val()),i.append("tematica_id",$("#editar_pergunta_tematica").val()),i.append("tipos_empreendimentos",$("#editar_pergunta_tipo_empreendimento").val()),i.append("areas",$("#editar_pergunta_area").val()),i.append("topicos",$("#editar_pergunta_topico").val()),i.append("tags",$("#editar_pergunta_tag").val()),i.append("ativo",$("#editar_pergunta_ativo").prop("checked")),i.append("fotos_para_excluir",p);let a=document.querySelectorAll(".foto_editar"),t=document.querySelectorAll(".legenda_editar");for(let e=0;e<t.length;e++)i.append("legendas[]",t[e].value?t[e].value:"");for(let e of a)e.files&&e.files[0]?i.append("fotos[]",e.files[0]):i.append("fotos[]",null);let o=$("#editar_pergunta_id").val();axios.post("perguntas/editar/"+o,i).then(e=>{b(e),y(),x("modal_editar_pergunta"),l=1,p=[]}).catch(e=>{d(e)}).finally(()=>{_("btn_editar_pergunta",!0)})});$("#btn_adicionar_foto_editar_pergunta").click(function(){let i=`<div id="foto${l}" class="my-2 border border-radius">                        
                        <input class="foto_editar mb-2 block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer focus:outline-none " type="file" accept=".png, .jpg, .jpeg">
                        <input type="text"  class="legenda_editar block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 text-xs focus:ring-blue-500 focus:border-blue-500 " placeholder="Legenda...">
                        <button foto="foto${l}" type="button" class="adicionar_pergunta_excluir_foto text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2"><i class="fas fa-times"></i></button>
                    </div>`;$("#editar_pergunta_fotos").append(i),l++});
