import{i as n,a as s,m as c,h as l,f as u,l as _,s as m,e as f}from"./funcoes-vPaU6AKm.js";import{l as g}from"./funcoes-_aXY7xnq.js";import{p as b}from"./funcoes-BqpQP-Hx.js";import{p as v}from"./funcoes-BlD_gYUS.js";import{p as x}from"./funcoes-CTWGcWow.js";import{p as y}from"./funcoes-Cnk3BGrZ.js";import{p as h}from"./funcoes-LRwxX7k0.js";import"./index-D9w9XwWd.js";var r=1,w=n("adicionar_pergunta_tipo_empreendimento"),q=n("adicionar_pergunta_topico"),k=n("adicionar_pergunta_area"),O=n("adicionar_pergunta_tag");$("#btn_modal_adicionar_pergunta").click(async function(){s("modal_adicionar_pergunta",!1);let a=await b("ativo","true");$("#adicionar_pergunta_tematica").empty();for(let t in a){let d=`<option value="${a[t].id}">${a[t].nome}</option>`;$("#adicionar_pergunta_tematica").append(d)}let i=await v("ativo","true");for(let t in i)w.addOption({value:i[t].id,text:i[t].nome});let o=await x("ativo","true");for(let t in o)q.addOption({value:o[t].id,text:o[t].nome});let e=await y("ativo","true");for(let t in e)k.addOption({value:e[t].id,text:e[t].nome});let p=await h("ativo","true");for(let t in p)O.addOption({value:p[t].id,text:p[t].nome});c("modal_adicionar_pergunta")});$("#btn_adicionar_pergunta").click(function(){l("btn_adicionar_pergunta",!1);let a=new FormData;a.append("titulo",$("#adicionar_pergunta_titulo").val()),a.append("tematica_id",$("#adicionar_pergunta_tematica").val()),a.append("tipos_empreendimentos",$("#adicionar_pergunta_tipo_empreendimento").val()),a.append("areas",$("#adicionar_pergunta_area").val()),a.append("topicos",$("#adicionar_pergunta_topico").val()),a.append("tags",$("#adicionar_pergunta_tag").val());let i=document.querySelectorAll(".foto"),o=document.querySelectorAll(".legenda");for(let e=0;e<o.length;e++)a.append("legendas[]",o[e].value?o[e].value:"");for(let e of i)e.files&&e.files[0]?a.append("fotos[]",e.files[0]):a.append("fotos[]",null);axios.post("perguntas/adicionar",a).then(e=>{u("modal_adicionar_pergunta"),_("modal_adicionar_pergunta"),m(e),g(),$("#adicionar_pergunta_fotos").empty(),r=1}).catch(e=>{f(e)}).finally(()=>{l("btn_adicionar_pergunta",!0)})});$("#btn_adicionar_foto").click(function(){let a=`<div id="foto${r}" class="my-2 border border-radius">                        
                        <input class="foto mb-2 block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none " type="file" accept=".png, .jpg, .jpeg">
                        <input type="text"  class="legenda block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 text-xs focus:ring-blue-500 focus:border-blue-500 " placeholder="Legenda...">
                        <button foto="foto${r}" type="button" class="adicionar_pergunta_excluir_foto text-white bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2"><i class="fas fa-times"></i></button>
                    </div>`;$("#adicionar_pergunta_fotos").append(a),r++});$(document).on("click",".adicionar_pergunta_excluir_foto",function(){let a=$(this).attr("foto");$("#"+a).remove()});
