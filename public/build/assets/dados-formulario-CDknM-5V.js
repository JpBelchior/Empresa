import{a as s}from"./index-BxfsJSEQ.js";import{a as f,e as m,h as u,s as h,f as v}from"./funcoes-DyzI_Slr.js";$(".responder-pergunta").click(function(){let t=$(this).attr("pergunta");$("#btn_salvar_respostas").attr("pergunta",t);let i=$("#formulario_id").val();s.get(`${app_url}/respostas/detalhes_resposta/${i}/${t}`).then(e=>{let a=e.data.pergunta,o=e.data.resposta;$("#titulo_pergunta").html(a.titulo),o==null?(c(!1),p(!1),l(!1),$("input[name='adequacao']").prop("checked",!1),$("input[name='probabilidade']").prop("checked",!1),$("input[name='impacto']").prop("checked",!1),$("input[name='esforco']").prop("checked",!1),$("input[name='valor']").prop("checked",!1),$("#resposta").val("")):($(`input[name='adequacao'][value='${o.nivel_adequacao}']`).prop("checked",!0),c(),$(`input[name='probabilidade'][value='${o.nivel_probabilidade}']`).prop("checked",!0),$(`input[name='impacto'][value='${o.nivel_impacto}']`).prop("checked",!0),l(),$(`input[name='esforco'][value='${o.nivel_esforco}']`).prop("checked",!0),$(`input[name='valor'][value='${o.nivel_valor}']`).prop("checked",!0),p(),$("#resposta").val(o.resposta)),f("modal_dados_formulario")}).catch(e=>{m(e)})});function c(t=!0){if(!t){$("#adequado").hide(),$("#vulneravel").hide();return}$("input[name='adequacao']:checked").val()>=vulnerabilidade?($("#adequado").hide(),$("#vulneravel").show()):($("#adequado").show(),$("#vulneravel").hide())}$("input[name='adequacao']").on("click",function(){c()});$("input[name='probabilidade']").on("click",function(){l()});$("input[name='impacto']").on("click",function(){l()});function l(t=!0){if(!t){$("#risco_altissimo").hide();return}let i=$("input[name='probabilidade']:checked").val(),e=$("input[name='impacto']:checked").val();i*e>=risco_altissimo?$("#risco_altissimo").show():$("#risco_altissimo").hide()}$("input[name='esforco']").on("click",function(){p()});$("input[name='valor']").on("click",function(){p()});function p(t=!0){if(!t){$("#curto_prazo").hide(),$("#medio_prazo").hide(),$("#longo_prazo").hide();return}let i=$("input[name='esforco']:checked").val(),e=$("input[name='valor']:checked").val(),a=i*e;a>=curto_prazo_minimo&&a<=curto_prazo_maximo&&($("#curto_prazo").show(),$("#medio_prazo").hide(),$("#longo_prazo").hide()),a>=medio_prazo_minimo&&a<=medio_prazo_maximo&&($("#curto_prazo").hide(),$("#medio_prazo").show(),$("#longo_prazo").hide()),a>=longo_prazo_minimo&&a<=longo_prazo_maximo&&($("#curto_prazo").hide(),$("#medio_prazo").hide(),$("#longo_prazo").show())}$("#btn_salvar_respostas").click(function(){u("btn_salvar_respostas",!1);let t=$(this).attr("pergunta"),i=$("input[name='adequacao']:checked").val();i=i??1;let e=$("input[name='probabilidade']:checked").val();e=e??1;let a=$("input[name='impacto']:checked").val();a=a??1;let o=$("input[name='esforco']:checked").val();o=o??1;let n=$("input[name='valor']:checked").val();n=n??1;let _=$("#resposta").val(),r=new FormData;r.append("formulario_id",$("#formulario_id").val()),r.append("pergunta_id",t),r.append("adequacao",i),r.append("probabilidade",e),r.append("impacto",a),r.append("esforco",o),r.append("valor",n),r.append("resposta",_),r.append("foto",document.getElementById("foto").files[0]),s.post("/formularios/responder_pergunta",r).then(d=>{h(d.data.mensagem),v("modal_dados_formulario"),location.reload()}).catch(d=>{m(d)}).finally(()=>{u("btn_salvar_respostas",!0)})});
